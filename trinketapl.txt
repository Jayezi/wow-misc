actions.trinkets=/variable,name=sync_up,value=buff.trueshot.up
actions.trinkets+=/variable,name=sync_remains,value=cooldown.trueshot.remains

consider a use effect trinket stronger if it:
	has a buff use effect and is against:
		no buff use effect
		shorter cooldown buff use effect
	has a dmg use effect and is against:
		no buff use effect
		no dmg use effect
		shorter cooldown dmg use effect
	is against no use effect

actions.trinkets+=/variable,name=trinket_1_stronger,value=
	trinket.1.has_use_buff&(
		!trinket.2.has_use_buff
		|trinket.2.cooldown.duration<trinket.1.cooldown.duration)
	|!trinket.1.has_use_buff&trinket.1.has_cooldown&(
		!trinket.2.has_use_buff&trinket.2.cooldown.duration<trinket.1.cooldown.duration)
	|!trinket.2.has_cooldown

use this trinket if it:
has a buff use effect and
	we are in a sync and
		this trinket is stronger
		or the other trinket is not ready
	or we are not in a sync and
		this trinket is stronger and
			the next sync is over half this total cooldown
			or the other trinket would lose a use
		or the other trinket is stronger and
			the other trinket is not ready and
				the other trinket will be ready for the next sync
					and the next sync is over 20 seconds away
				or the other trinket will not be ready for the next sync and
					the next sync is over half this trinket total cooldown
					or this trinket would lose a use if held for the next sync
			or the other trinket is ready and
				the next sync is over 20 seconds away and
					the next sync is less than half the other trinket total cooldown
or has no buff effect and
	we are in a sync and
		this trinket is stronger
		or the other trinket is not ready
	or we are not in a sync and 
		is against no buff use effect and
			this trinket is stronger
			or the other trinket is not ready
		or is against a buff use effect and
			the next sync is over 20 seconds away
			or the other trinket cooldown is over 20 seconds
or the fight will end before 25 seconds

actions.trinkets+=/use_items,slots=trinket1,if=
trinket.1.has_use_buff&
	(variable.sync_up&(
		variable.trinket_1_stronger
		|trinket.2.cooldown.remains)
	|!variable.sync_up&(
		variable.trinket_1_stronger&(
			variable.sync_remains>trinket.1.cooldown.duration%2
			|trinket.2.has_use_buff&trinket.2.cooldown.remains>variable.sync_remains-15&trinket.2.cooldown.remains-5<variable.sync_remains&variable.sync_remains+40>fight_remains)
		|variable.trinket_2_stronger&(
			trinket.2.cooldown.remains&(
				trinket.2.cooldown.remains-5<variable.sync_remains&
					variable.sync_remains>=20
				|trinket.2.cooldown.remains-5>=variable.sync_remains&(
					variable.sync_remains>trinket.1.cooldown.duration%2
					|trinket.1.cooldown.duration<fight_remains&(variable.sync_remains+trinket.1.cooldown.duration>fight_remains)))
			|trinket.2.cooldown.ready
				&variable.sync_remains>20&
					variable.sync_remains<trinket.2.cooldown.duration%2)))
|!trinket.1.has_use_buff&(
	variable.sync_up&(
		variable.trinket_1_stronger
		|trinket.2.cooldown.remains)
	|!variable.sync_up&(
		!trinket.2.has_use_buff&(
			variable.trinket_1_stronger
			|trinket.2.cooldown.remains)
		|trinket.2.has_use_buff&(
			variable.sync_remains>20
			|trinket.2.cooldown.remains>20)))
|target.time_to_die<25&(variable.trinket_1_stronger|trinket.2.cooldown.remains)

actions.trinkets=variable,name=sync_up,value=buff.trueshot.up
actions.trinkets+=/variable,name=sync_remains,value=cooldown.trueshot.remains
actions.trinkets+=/variable,name=trinket_1_stronger,value=trinket.1.has_use_buff&(!trinket.2.has_use_buff|trinket.2.cooldown.duration<trinket.1.cooldown.duration)|!trinket.1.has_use_buff&trinket.1.has_cooldown&!trinket.2.has_use_buff&trinket.2.cooldown.duration<trinket.1.cooldown.duration|!trinket.2.has_cooldown
actions.trinkets+=/variable,name=trinket_2_stronger,value=trinket.2.has_use_buff&(!trinket.1.has_use_buff|trinket.1.cooldown.duration<trinket.2.cooldown.duration)|!trinket.2.has_use_buff&trinket.2.has_cooldown&!trinket.1.has_use_buff&trinket.1.cooldown.duration<trinket.2.cooldown.duration|!trinket.1.has_cooldown

actions.trinkets+=/use_items,slots=trinket1,if=trinket.1.has_use_buff&(variable.sync_up&(variable.trinket_1_stronger|trinket.2.cooldown.remains)|!variable.sync_up&(variable.trinket_1_stronger&(variable.sync_remains>trinket.1.cooldown.duration%2|trinket.2.has_use_buff&trinket.2.cooldown.remains>variable.sync_remains-15&trinket.2.cooldown.remains-5<variable.sync_remains&variable.sync_remains+40>fight_remains)|variable.trinket_2_stronger&(trinket.2.cooldown.remains&(trinket.2.cooldown.remains-5<variable.sync_remains&variable.sync_remains>=20|trinket.2.cooldown.remains-5>=variable.sync_remains&(variable.sync_remains>trinket.1.cooldown.duration%2|trinket.1.cooldown.duration<fight_remains&(variable.sync_remains+trinket.1.cooldown.duration>fight_remains)))|trinket.2.cooldown.ready&variable.sync_remains>20&variable.sync_remains<trinket.2.cooldown.duration%2)))|!trinket.1.has_use_buff&(variable.sync_up&(variable.trinket_1_stronger|trinket.2.cooldown.remains)|!variable.sync_up&(!trinket.2.has_use_buff&(variable.trinket_1_stronger|trinket.2.cooldown.remains)|trinket.2.has_use_buff&(variable.sync_remains>20|trinket.2.cooldown.remains>20)))|target.time_to_die<25&(variable.trinket_1_stronger|trinket.2.cooldown.remains)

actions.trinkets+=/use_items,slots=trinket2,if=trinket.2.has_use_buff&(variable.sync_up&(variable.trinket_2_stronger|trinket.1.cooldown.remains)|!variable.sync_up&(variable.trinket_2_stronger&(variable.sync_remains>trinket.2.cooldown.duration%2|trinket.1.has_use_buff&trinket.1.cooldown.remains>variable.sync_remains-15&trinket.1.cooldown.remains-5<variable.sync_remains&variable.sync_remains+40>fight_remains)|variable.trinket_1_stronger&(trinket.1.cooldown.remains&(trinket.1.cooldown.remains-5<variable.sync_remains&variable.sync_remains>=20|trinket.1.cooldown.remains-5>=variable.sync_remains&(variable.sync_remains>trinket.2.cooldown.duration%2|trinket.2.cooldown.duration<fight_remains&(variable.sync_remains+trinket.2.cooldown.duration>fight_remains)))|trinket.1.cooldown.ready&variable.sync_remains>20&variable.sync_remains<trinket.1.cooldown.duration%2)))|!trinket.2.has_use_buff&(variable.sync_up&(variable.trinket_2_stronger|trinket.1.cooldown.remains)|!variable.sync_up&(!trinket.1.has_use_buff&(variable.trinket_2_stronger|trinket.1.cooldown.remains)|trinket.1.has_use_buff&(variable.sync_remains>20|trinket.1.cooldown.remains>20)))|target.time_to_die<25&(variable.trinket_2_stronger|trinket.1.cooldown.remains)
